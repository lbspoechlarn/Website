<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Slot Simulator</title>
<script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
<style>
:root{
  --bg:#000000;
  --panel:#0b1220;
  --accent:#333333;
  --muted:#9aa9bb;
  --white:#fff;
}

/* Flexbox-Layout f√ºr Sticky Footer */
html, body {
  height: 100%;
  margin: 0;
  padding: 0;
  font-family: Inter, Segoe UI, system-ui, Roboto, "Helvetica Neue", Arial;
  color: var(--white);
  background: url('https://raw.githubusercontent.com/prebuiltui/prebuiltui/main/assets/hero/green-gradient-bg.svg') black;
  background-repeat: no-repeat;
  background-size: cover;
  box-sizing: border-box;
}

body {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  padding: 24px;
}

.app-wrapper {
  flex: 1 0 auto;
  width: 100%;
  max-width: 980px;
  margin: 0 auto;
}

.app {
  position: relative;
  overflow: hidden;
}

header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
  margin-bottom: 16px;
}
h1 { font-size: 20px; margin: 0; color: var(--white); }
.status {
  text-align: right;
  font-size: 13px;
  color: var(--muted);
}
.slot-stage {
  display: flex;
  gap: 18px;
  justify-content: center;
  align-items: center;
  padding: 18px;
}
.reel {
  width: 120px;
  height: 140px;
  background: rgba(255,255,255,0.03);
  border-radius: 10px;
  overflow: hidden;
  position: relative;
  border: 1px solid rgba(255,255,255,0.03);
  display: flex;
  align-items: center;
  justify-content: center;
}
.strip {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  transition: transform ease-out;
}
.symbol {
  width: 100%;
  height: 140px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 48px;
  user-select: none;
}
.symbol .label {
  display: block;
  font-size: 12px;
  color: var(--muted);
  margin-top: 6px;
  text-align: center;
}
.controls {
  margin-top: 14px;
  display: flex;
  gap: 12px;
  align-items: center;
  justify-content: center;
  flex-wrap: wrap;
}
.btn {
  background: var(--accent);
  color: var(--white);
  border: 0;
  padding: 12px 18px;
  border-radius: 10px;
  font-weight: 600;
  cursor: pointer;
  box-shadow: 0 6px 18px rgba(43,156,255,0.14);
}
.btn:active { transform: translateY(1px); }
.small {
  background: transparent;
  border: 1px solid rgba(255,255,255,0.06);
  color: var(--white);
  padding: 8px 10px;
  border-radius: 8px;
}
.info {
  display: flex;
  gap: 12px;
  align-items: center;
  color: var(--muted);
  font-size: 14px;
}
.overlay {
  position: fixed;
  inset: 0;
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 60;
  pointer-events: none;
}
.overlay.show {
  display: flex;
  pointer-events: auto;
}
.panel {
  background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
  padding: 28px 24px;
  border-radius: 14px;
  text-align: center;
  width: min(90%,700px);
  box-shadow: 0 30px 80px rgba(2,6,23,0.7);
  border: 1px solid rgba(255,255,255,0.04);
}
.panel h2{margin:0;color:var(--accent);}
.tip {
  margin-top: 14px;
  font-size: 18px;
  color: var(--white);
  line-height: 1.3;
}
.close {
  margin-top: 18px;
  display: inline-block;
  background: var(--accent);
  color: var(--white);
  border-radius: 10px;
  padding: 10px 14px;
  cursor: pointer;
  border: 0;
}
.blurred {
  filter: blur(6px) brightness(0.7);
  transition: filter .25s ease;
  pointer-events: none;
  user-select: none;
}

/* Footer */
footer {
  flex-shrink: 0;
  padding: 16px 0;
  text-align: center;
  color: white;
  width: 100%;
  max-width: 980px;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

@media (max-width:640px){
  /* Reduziere den Abstand zwischen den Walzen und das Padding */
  .slot-stage{gap:8px;padding:12px;} 
  /* Reduziere die Walzenbreite und -h√∂he, damit alle 3 passen */
  .reel{width:88px;height:120px;} 
  /* Passe die Symbolgr√∂√üe an die neue Walzenh√∂he an (WICHTIG: muss 120px sein!) */
  .symbol{font-size:40px;height:120px;} 
  .panel{padding:18px;}
  
  /* Korrektur f√ºr die Status-Nachricht und Header-Ausrichtung */
  header {
    align-items: flex-start;
  }
  .status {
    margin-top: 5px; 
  }
  
  /* Stellt sicher, dass die Symbole auf dem Handy nicht zu gro√ü sind */
  .symbol .label {
      font-size: 10px;
  }
}
</style>
</head>
<body>


<section id="sloti" class="relative flex flex-col items-center max-md:px-2 text-white text-sm pb-28 pt-8">

<nav class="flex items-center border mx-4 w-full max-w-4xl justify-between border-slate-700 px-4 py-2.5 my-4 rounded-full text-white">
    <a href="#">
         <img src="./logo_lbs.png" width="157" height="40" alt="">
    </a>
    
    <div id="menu" class="max-md:absolute max-md:bg-black/50 max-md:backdrop-blur max-md:top-0 transition-all duration-300 max-md:h-full max-md:w-full max-md:z-10 max-md:-left-full max-md:justify-center flex-col md:flex-row flex items-center gap-2">
        <a onclick="closeNavbar()" class="px-4 py-2"href="index.html">Home</a>
        <a onclick="closeNavbar()" class="px-4 py-2 border border-white/10 bg-white/10 font-medium rounded-full" href="./slot.html">Casino</a>
        <a onclick="closeNavbar()" class="px-4 py-2" href="index.html#guides">Guides</a>
        <a onclick="closeNavbar()" class="px-4 py-2" href="https://www.reddit.com/r/LBSPoechlarn/">Beratung</a>
        <a onclick="closeNavbar()" class="px-4 py-2" href="history.html">History</a>
        
        <a onclick="closeNavbar()" class="md:hidden px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-full font-medium" href="./maps.html">Karte</a>
        
        <button onclick="closeNavbar()" class="md:hidden bg-gray-800 hover:bg-black text-white p-2 rounded-md aspect-square font-medium transition">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M18 6 6 18" />
                <path d="m6 6 12 12" />
            </svg>
        </button>
    </div>
    
    <button onclick="openNavbar()" class="md:hidden">
        <svg class="size-7" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 6h16M4 12h16M4 18h16" />
        </svg>
    </button>
    
    <button onclick="window.location.href='./maps.html'" class="hidden md:block bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-full transition">
        Karte
    </button>
</nav>

<div id="overlay" class="overlay" aria-hidden="true">
  <div class="panel" role="dialog" aria-modal="true">
    <h2>Gewonnen!</h2>
    <p id="tipText" class="tip"></p>
    <button id="closeBtn" class="close">Weiter</button>
  </div>
</div>

<div class="app-wrapper">
  <div id="app" class="app" role="application">
    <header>
      <h1>Casino</h1>
      <div class="status">
        <div id="message">Viel Gl√ºck!</div>
        <div style="font-size:12px;color:var(--muted)">Gewinne zeigen einen Tipp</div>
      </div>
    </header>
    <main>
      <div class="slot-stage">
        <div class="reel"><div class="strip" id="strip-0"></div></div>
        <div class="reel"><div class="strip" id="strip-1"></div></div>
        <div class="reel"><div class="strip" id="strip-2"></div></div>
      </div>
      <div class="controls">
        <div class="info">
          <div>Credits: <strong id="credits">50</strong></div>
          <div>|</div>
          <div>Bet: <strong id="bet">5</strong></div>
        </div>
        <button id="spinBtn" class="btn">Spin</button>
        <div style="display:flex;gap:8px;align-items:center">
          <button id="betDown" class="small">-</button>
          <button id="betUp" class="small">+</button>
        </div>
      </div>
    </main>
  </div>
</div>

</section>

<footer>
  <img src="./logo_lbs.png" width="157" height="40" alt="">
  <p class="mt-4 text-center">Copyright ¬© 2025 <a href="#">?XCE</a>. All rights reservered.</p>
   <a href="impressum.html">impressum</a>
</footer>


<script src="https://cdn.jsdelivr.net/npm/flowbite@4.0.1/dist/flowbite.min.js"></script>
<script>
  // Symbole
const SYMBOLS = [
  {emoji:'üçé', label:'Apfel'},
  {emoji:'üçí', label:'Kirsche'},
  {emoji:'üçã', label:'Zitrone'},
  {emoji:'üîî', label:'Glocke'},
  {emoji:'‚≠ê', label:'Stern'},
  {emoji:'üíé', label:'Diamant'},
  {emoji:'7Ô∏è‚É£', label:'Sieben'}
];

// Tipps bei Jackpot
const TIPS = [
  "Tipp: Gl√ºckspiel bringt dich weiter.",
  "Tipp: To Good to Go - Sparst viel Geld.",
  "Tipp: Drei mal L√§uten in ein Geb√§ude, ruft bestimme Personen in den ersten Stock",
];

let credits = 50;
let bet = 5;
let spinning = false;

const creditsEl = document.getElementById("credits");
const betEl = document.getElementById("bet");
const messageEl = document.getElementById("message");
const overlay = document.getElementById("overlay");
const tipText = document.getElementById("tipText");
const app = document.getElementById("app");

const strips = [];
for (let i = 0; i < 3; i++) {
  const el = document.getElementById("strip-" + i);
  strips.push(el);
  populateStrip(el);
}

function populateStrip(stripEl) {
  stripEl.innerHTML = "";
  // F√ºlle den Strip mit mehr Symbolen f√ºr eine fl√ºssigere Rollbewegung
  for (let r = 0; r < 8; r++) { 
    SYMBOLS.forEach(s => {
      const d = document.createElement("div");
      d.className = "symbol";
      d.innerHTML = `
      <div style="text-align:center">
      <div style="font-size:44px">${s.emoji}</div>
      <span class="label">${s.label}</span>
      </div>`;
      stripEl.appendChild(d);
    });
  }
}

function updateUI() {
  creditsEl.textContent = credits;
  betEl.textContent = bet;
}

function sleep(ms) { return new Promise(r => setTimeout(r, ms)); }
function rand(n) { return Math.floor(Math.random() * n); }

document.getElementById("betUp").onclick = () => {
  if (bet < credits) {
    bet++;
    updateUI();
  }
};
document.getElementById("betDown").onclick = () => {
  if (bet > 1) {
    bet--;
    updateUI();
  }
};

document.getElementById("spinBtn").onclick = () => startSpin();

async function startSpin() {
  if (spinning || credits < bet) return;
  spinning = true;

  credits -= bet;
  updateUI();
  messageEl.textContent = "Spinning...";
  
  // Wichtig: Die Symbolh√∂he muss hier korrekt ermittelt werden (140 oder 120)
  const baseH = window.innerWidth <= 640 ? 120 : 140;

  const results = [
    rand(SYMBOLS.length),
    rand(SYMBOLS.length),
    rand(SYMBOLS.length)
  ];

  const durations = [900, 1200, 1500];

  for (let r = 0; r < 3; r++) {
    const strip = strips[r];
    // F√ºge einen Puffer von 3 vollen Zyklen hinzu, um eine l√§ngere Animation zu gew√§hrleisten
    const cycles = 3 + rand(4);
    const index = cycles * SYMBOLS.length + results[r];
    const ty = -index * baseH;

    strip.style.transition = `transform ${durations[r]}ms cubic-bezier(.12,.8,.32,1)`;
    strip.style.transform = `translateY(${ty}px)`;
  }

  await sleep(Math.max(...durations) + 100);

  let win = results[0] === results[1] && results[1] === results[2];
  let payout = win ? bet * 10 : 0;

  if (payout > 0) {
    credits += payout;
    updateUI();
    messageEl.textContent = "JACKPOT! Gewinn: " + payout;

    const tip = TIPS[rand(TIPS.length)];
    showTip(tip);
  } else {
    messageEl.textContent = "Kein Treffer ‚Äì nochmal!";
  }

  spinning = false;
}

function showTip(t) {
  tipText.textContent = t;
  overlay.classList.add("show");
  app.classList.add("blurred");
}

document.getElementById("closeBtn").onclick = () => {
  overlay.classList.remove("show");
  app.classList.remove("blurred");
};

// üåü FIX: Funktion zum Setzen eines Startsymbols unter Ber√ºcksichtigung der mobilen Symbolh√∂he üåü
function setInitialSymbol(reelIndex, symbolIndex) {
  const strip = strips[reelIndex];
  // Bestimme die korrekte H√∂he des Symbols (120px f√ºr Handy, 140px f√ºr Desktop)
  const symbolHeight = window.innerWidth <= 640 ? 120 : 140; 
  
  // Die Position im Strip, um das Symbol zu zentrieren
  const index = symbolIndex; 
  const ty = -index * symbolHeight;

  strip.style.transition = 'none'; 
  strip.style.transform = `translateY(${ty}px)`;
}

// Initialisiere die Walzen auf Basis des Fotos:
// Walze 0 (Apfel = Index 0)
setInitialSymbol(0, 0); 
// Walze 1 (Glocke = Index 3) - Glocke ist das 4. Symbol in SYMBOLS (0-Apfel, 1-Kirsche, 2-Zitrone, 3-Glocke)
setInitialSymbol(1, 3); 
// Walze 2 (wird nicht initial gesetzt, um den leeren/schwarzen Hintergrund zu zeigen, wie im Bild)

// Setze die initiale Nachricht, wie auf dem Foto.
messageEl.textContent = "Kein Treffer ‚Äì nochmal!";

updateUI();
</script>

 <script>
          const menu = document.getElementById('menu');

            function closeNavbar() {
                menu.classList.remove('max-md:left-0');
                menu.classList.add('max-md:-left-full');
            }

            function openNavbar() {
                menu.classList.remove('max-md:-left-full');
                menu.classList.add('max-md:left-0');
            }

            document.querySelectorAll('#menu a').forEach(link => {
                link.addEventListener('click', function () {
                    document.querySelectorAll('#menu a').forEach(el => el.classList.remove('border', 'border-white/10', 'bg-white/10', 'font-medium', 'rounded-full'));
                    this.classList.add('border', 'border-white/10', 'bg-white/10', 'font-medium', 'rounded-full');
                });
            });
    </script>

</body>
</html>